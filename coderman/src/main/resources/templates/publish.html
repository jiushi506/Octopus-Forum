<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>发起问题</title>
    <link rel="stylesheet" href="/index.css">
    <link rel="stylesheet" href="webjars/bootstrap/3.3.5/css/bootstrap.min.css"
          th:href="@{/webjars/bootstrap/3.3.5/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/css/iconfont.css}">
    <link rel="stylesheet" th:href="@{/css/editormd.min.css}"/>
    <script src="webjars/jquery/3.1.1/jquery.min.js" th:src="@{/webjars/jquery/3.1.1/jquery.min.js}"></script>
    <script src="webjars/bootstrap/3.3.5/js/bootstrap.min.js"
            th:src="@{/webjars/bootstrap/3.3.5/js/bootstrap.min.js}"></script>
    <script th:src="@{/editormd.min.js}"></script>
</head>
<body>
<!--引入导航条-->
<div th:insert="~{navbar :: navbar}"></div>
<!--内容部分-->
<div class="container main">
    <div class="row">
        <!--左边部分-->
        <div class="col-lg-9 col-md-12 col-sm-12 container-fluid">
            <h3 style="margin-top: 20px;"><span style="font-size: 28px;" class="iconfont icon-faqi"></span>发起</h3>
            <hr>
            <form th:action="@{/publish}" method="post">
                <input type="hidden" th:name="id" th:value="${id}">
                <!--标题-->
                <div class="form-group">
                    <label for="bs-example-navbar-collapse-1">问题标题 (简明扼要)</label>
                    <input type="text" th:value="${title}" class="form-control" th:id="title" name="title"
                           placeholder="标题">
                </div>
                <!--描述信息-->

                <label for="bs-example-navbar-collapse-1">问题补充 (必填,请参照右侧提示)</label>
                <div id="editor">
                        <textarea style="display:none;" th:text="${description}" th:id="description"
                                  name="description" placeholder="填写问题详情信息">
                        </textarea>
                    <aside id="markdown-toc">
                        <div class="markdown-toc" style="position:absolute;top:701px;">
                            <div class="markdown-toc-header">目录</div>
                            <div>
                                <ul>
                                    <li><a href="https://elasticsearch.cn/article/13435#tip0">前言</a></li>
                                    <li><a href="https://elasticsearch.cn/article/13435#tip1">需求</a></li>
                                    <li><a href="https://elasticsearch.cn/article/13435#tip2">之前的做法</a>
                                        <ul>
                                            <li><a href="https://elasticsearch.cn/article/13435#tip3">查询语句</a></li>
                                            <li><a href="https://elasticsearch.cn/article/13435#tip4">查询结果</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="https://elasticsearch.cn/article/13435#tip5">改进后的做法</a>
                                        <ul>
                                            <li><a href="https://elasticsearch.cn/article/13435#tip6">查询语句</a></li>
                                            <li><a href="https://elasticsearch.cn/article/13435#tip7">查询结果</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </aside>

                </div>
                <!--标签输入-->
                <div class="form-group">
                    <label for="bs-example-navbar-collapse-1">添加标签</label>
                    <input type="text" th:value="${tag}" class="form-control" th:name="tag"
                           name="description" id="tagcontent"
                           placeholder="输入标签以 , 分隔">
                </div>

                <!--标签导航-->
                <div  th:id="tagwrapper">
                    <span th:each="Mytags:${tagsCache}">
                    <span style="font-size: 14px;color: #999;" th:text="${Mytags.tagTitle}"></span>: &nbsp;&nbsp;&nbsp;&nbsp;
                    <span style="cursor: pointer;" th:each="tag:${Mytags.tags}">
                        <span class="label label-default" onclick="addTag($(this).html())">[[${tag}]]</span>
                    </span>
                  <br><br>
                </span>
                </div>
                <!---->


                <!--提示信息-->
                <div class="form-group">
                    <div class="alert alert-success" th:if="${msg!=null}" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <a href="#" class="alert-link" th:text="${msg}">...</a>
                    </div>
                    <input style="float: right; margin-bottom: 100px;" type="submit" th:value="发表"
                           class="btn btn-default btn-default" th:id="publishBtn">
                </div>
            </form>

        </div>
        <!--右边部分-->
        <div class="col-lg-3 col-md-12 col-sm-12 rightwrapper" style="height: 800px;">
            <h4 style="margin-top: 20px;"><span class="iconfont icon-wenti"></span>&nbsp;问题发起指南</h4>
            <hr>
            1、使用本站源码不得用于任何商业用途以及任何变现，站长提供给大家只是为了让大家用于学术学习研究，不得使用本站提供的资源非法谋取 ta
            人利益，任何用于商业或以此获取利益的都视为非法，后果与本站无关！请务必在符合国家规定范围内使用本站任何程序！
            <br>
            2、本站资源绝多大数收集于网络或网友分享，本站本身并不生产任何资源，因此并不能保证每一款资源都百分百适合你！
            <br>
            3、如有发现本站发布的资源侵犯了您的利益，欢迎来信告诉我们，核实后将会删除。
            <br>
        </div>

    </div>
</div>


<script type="text/javascript">
    $(function () {
        var editor = editormd("editor", {
            path: "/lib/",  // Autoload modules mode, codemirror, marked... dependents libs path
            width: "100%",
            placeholder: "此处开始编写您要发布的内容...",
            emoji: true,
            taskList: true,
            flowChart: true,             // 开启流程图支持，默认关闭
            //sequenceDiagram: true,       // 开启时序/序列图支持，默认关闭,
            height: "610px",
            delay: 0,
            saveHTMLToTextarea: true, // 保存 HTML 到 Textarea
            toolbarAutoFixed: false,//工具栏自动固定定位的开启与禁用
            syncScrolling: "single",
            imageUpload: true,
            //theme : "dark",
            //previewTheme : "dark",
            //editorTheme : editormd.editorThemes['submit'],
            imageFormats: ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
            imageUploadURL: "/question/fileupload",
            watch: false,
        });

    });

    function addTag(tagname) {
        var preval = $("#tagcontent").val();
        if (""==preval||preval==null) {
            $("#tagcontent").val(tagname);
        } else {
            if(preval.indexOf(tagname) >= 0 ) {
                alert("已经包含该标签不能重复添加");
                return false;
            }
            $("#tagcontent").val(preval+","+tagname);
        }
    }
</script>
</body>
</html>